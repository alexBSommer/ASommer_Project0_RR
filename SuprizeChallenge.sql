create database SalesDb
go
use SalesDb

create schema Sales;
go

create table Sales.Customers (
	ID int not null primary key,
	Firstname nvarchar(30),
	Lastname nvarchar(30),
	CardNumber int
	);
go
create table Sales.Products (
	ID int not null primary key,
	[Name] nvarchar(30),
	Price decimal
	);
go
create table Sales.Orders (
	ID int not null primary key,
	ProductID int  foreign key references Sales.Products(ID),
	CustomerId int foreign key references Sales.Customers(ID),
	);
go
--insert data
insert into Sales.Customers 
values (1, 'Tina', 'Smith', 12345);
insert into Sales.Customers 
values (2, 'Adam', 'Smithee', 54321);
insert into Sales.Customers 
values (3, 'John', 'Doe', 24689);
--products
insert into Sales.Products
values (1, 'iPhone', 200.00 ); 
insert into Sales.Products
values (2, 'Headphones', 50.00 );
insert into Sales.Products
values (3, 'Laptop', 500.00 );
--orders
insert into Sales.Orders
values (1, 1, 1);
insert into Sales.Orders
values (2, 2, 2);
insert into Sales.Orders
values (3, 3, 3);
insert into Sales.Orders
values (4, 2, 3);
insert into Sales.Orders
values (5, 1, 2);
go
--query data
--report all orders by Tina Smith
select Orders.ID as [Order ID], Customers.Firstname, Customers.Lastname, Products.[Name], Products.Price
from Sales.Orders
inner join Sales.Customers on Orders.CustomerId = Customers.ID
inner join Sales.Products on Orders.ProductID = Products.ID
where Customers.Firstname= 'Tina' and Customers.Lastname = 'Smith';
go
--report all revenue generated by sales of 'iPhone'
select sum(Price)
from Sales.Orders
inner join Sales.Customers on Orders.CustomerId = Customers.ID
inner join Sales.Products on Orders.ProductID = Products.ID
where Products.[Name] = 'iPhone';
go
--increse price of iPhone to $250
update Sales.Products
set Products.Price = 250
where Products.[Name] = 'iPhone' 
go